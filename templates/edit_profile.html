<!DOCTYPE html>
<html>
<head>
    <title>Edit Profile</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        .field-group { margin-bottom: 14px; }
        .edit-actions { display: flex; gap: 10px; margin-top: 16px; }
        @media (max-width: 600px) { .edit-actions { flex-direction: column; gap:12px; } }
    </style>
    <script>
    function validateEditForm() {
        var email = document.forms["editForm"]["email"].value.trim();
        var mobile = document.forms["editForm"]["mobile"].value.trim();
        if (!email && !mobile) {
            alert("Please enter either an email or mobile number.");
            return false;
        }
        if (mobile && !/^\d{10,15}$/.test(mobile.replace(/\D/g,''))) {
            alert("Please enter a valid mobile number (digits only, 10-15 digits).");
            return false;
        }
        return true;
    }
    </script>
</head>
<body>
<div class="container" style="max-width:500px;">
    <h2>Edit Profile</h2>
    {% if error %}
      <div class="status-error" style="margin-bottom:13px;">{{ error }}</div>
    {% endif %}
    <form method="POST" name="editForm" onsubmit="return validateEditForm();">
        <div class="field-group">
            <label>Email:</label>
            <input name="email" type="email" value="{{ user.email|default('') }}" autocomplete="email">
        </div>
        <div class="field-group">
            <label>Mobile Number:</label>
            <input name="mobile" type="tel" pattern="\d{10,15}" value="{{ user.mobile|default('') }}" autocomplete="tel" placeholder="Digits only">
        </div>
        <div class="field-group">
            <label>Name:</label>
            <input name="name" value="{{ user.name|default('') }}">
        </div>
        <div class="field-group">
            <label>Gender:</label>
            <input name="gender" value="{{ user.gender|default('') }}">
        </div>
        <div class="field-group">
            <label>Address:</label>
            <input name="address" value="{{ user.address|default('') }}">
        </div>
        <div class="field-group">
            <label>Verify changes by OTP:</label><br>
            {% if user.email %}
            <input type="radio" name="contact" value="email" checked> Email ({{ user.email }})<br>
            {% endif %}
            {% if user.mobile %}
            <input type="radio" name="contact" value="mobile" {% if not user.email %}checked{% endif %}> Mobile ({{ user.mobile }})<br>
            {% endif %}
        </div>
        <div class="edit-actions">
            <button type="submit" class="btn">Send OTP & Save</button>
            <a href="{{ url_for('profile') }}" class="btn">Cancel</a>
        </div>
    </form>
</div>
</body>  
</html>
